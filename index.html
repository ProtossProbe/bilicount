<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>Bilibili Fans</title>

    <!-- Meta Description for Search Engine Results -->
    <meta name="description" content="Bilibili Fans">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/odometer-theme-minimal.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/odometer.min.js"></script>
    <script>
        window.odometerOptions = {
            format: '(,ddd).dd'
        };
    </script>
</head>

<body>
    <div class="outer text">
        <div class="middle">
            <div class="name">
                Probe
            </div>
            <div class="inner">

                <div class="odometer number">12450</div>
            </div>
        </div>
    </div>
    <script defer type="text/javascript">
        var id = window.location.search.substring(1);
        var proxyUrl = "http://35.200.123.13:3300/jsonp";
        var targetUrl = "https://api.bilibili.com/x/web-interface/card?mid=" + id;
        fetchName = function() {
            $.ajax({
                url: proxyUrl,
                dataType: "jsonp",
                data: {
                    url: targetUrl
                },
                success: function(json) {
                    $('.name').html(json.data.card.name);
                }
            })

        }
        fetchData = function() {
            $.ajax({
                url: proxyUrl,
                dataType: "jsonp",
                data: {
                    url: targetUrl
                },
                success: function(json) {
                    $('.odometer').html(json.data.card.fans);

                }
            })
        }
        fetchName();
        fetchData();
        setInterval(fetchData, 3000);
    </script>


</body>